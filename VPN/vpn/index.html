<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Dariel Piñón" /><link rel="canonical" href="https://daarieel.github.io/ASO/VPN/vpn/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>VPN - Dariel Piñón ASO</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../stylesheets/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "VPN";
        var mkdocs_page_input_path = "VPN/vpn.md";
        var mkdocs_page_url = "/ASO/VPN/vpn/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Dariel Piñón ASO
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">RA 1</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Creaci%C3%B3%20entorn%20d%E2%80%99arrencada/CreacioEntornsArrancadaLinux/">Creació entorn d’arrencada Linux</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Creaci%C3%B3%20entorn%20d%E2%80%99arrencada/CreacioEntornsArrancadaWin/">Creació entorn d’arrencada Windows</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RA 2</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../kernel/kernel_linux/">Gestión de Kernels</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">VPN</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#instalacion-de-caracteristicas">Instalación de Características</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#configuracion-del-servidor">Configuración del Servidor</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#configurar-el-rango-de-direcciones-para-los-clientes-del-tunel-vpn">Configurar el rango de direcciones para los clientes del túnel VPN</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#configuracion-de-la-conexion-vpn-en-el-cliente">Configuración de la conexión VPN en el cliente</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#configuracion-de-la-carpeta-accesible-unicamente-por-el-usuario-vpn">Configuración de la carpeta accesible únicamente por el usuario VPN</a>
    </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Dariel Piñón ASO</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">RA 2</li>
      <li class="breadcrumb-item active">VPN</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="servidor-vpn"><strong>Servidor VPN</strong></h1>
<h2 id="instalacion-de-caracteristicas"><strong>Instalación de Características</strong></h2>
<p>Para poder levantar un servidor VPN es necesario agregar el rol Acceso remoto desde el asistente de Windows Server. Dentro de este rol se incluyen los servicios DirectAccess y VPN (RAS) junto con el componente de Enrutamiento, ambos necesarios para permitir conexiones remotas y gestionar el tráfico del túnel VPN.</p>
<p><img alt="VPN" src="../img/vpn1.png" /></p>
<hr />
<h2 id="configuracion-del-servidor"><strong>Configuración del Servidor</strong></h2>
<p>Una vez instalado el rol correspondiente, se accede a la consola de administración desde el menú Herramientas del Administrador del servidor. Dentro de este menú se debe seleccionar la opción Enrutamiento y acceso remoto, que permitirá iniciar la configuración del servicio VPN y habilitar las funciones necesarias para gestionar conexiones remotas.</p>
<p><img alt="VPN" src="../img/vpn2.png" /></p>
<hr />
<p>Para continuar con la configuración, se selecciona el servidor dentro de la consola y se utiliza la opción Configurar y habilitar Enrutamiento y acceso remoto. Esto inicia el asistente que permitirá activar los servicios necesarios para que el servidor funcione como punto de acceso VPN y gestione las conexiones entrantes.</p>
<p><img alt="VPN" src="../img/vpn3.png" /></p>
<hr />
<p>Para continuar con el asistente, se selecciona la opción Acceso remoto (acceso telefónico o red privada virtual). Esta configuración habilita al servidor para aceptar conexiones remotas mediante VPN, permitiendo que los clientes externos puedan autenticarse y establecer un túnel seguro hacia la red interna.</p>
<p><img alt="VPN" src="../img/vpn4.png" /></p>
<hr />
<p>En este paso se habilita específicamente la opción VPN, indicando que el servidor actuará como puerta de enlace para recibir conexiones remotas a través de Internet. Al seleccionar esta opción, el asistente prepara la configuración necesaria para que los clientes puedan establecer un túnel seguro hacia la red interna del servidor.</p>
<p><img alt="VPN" src="../img/vpn5.png" /></p>
<hr />
<p>En este punto se selecciona la interfaz de red que el servidor utilizará para recibir las conexiones VPN. Se escoge la interfaz conectada hacia Internet o hacia la red externa, ya que será la encargada de gestionar el tráfico entrante de los clientes remotos. Esta selección permite al asistente configurar las rutas y reglas necesarias para que el túnel VPN funcione correctamente.</p>
<p><img alt="VPN" src="../img/vpn6.png" /></p>
<hr />
<p>Para continuar con la configuración, se selecciona la opción Automáticamente para la asignación de direcciones IP. Con esta opción, el servidor utilizará el servicio DHCP existente para entregar direcciones a los clientes VPN; en caso de no haber un DHCP disponible, el propio servidor generará las direcciones de forma interna. Esto permite que los clientes remotos obtengan una IP válida dentro del rango configurado al establecer el túnel.</p>
<p><img alt="VPN" src="../img/vpn7.png" /></p>
<hr />
<p>En este paso se indica que la autenticación de las solicitudes se gestionará directamente desde Enrutamiento y acceso remoto, por lo que se selecciona la opción No, usar Enrutamiento y acceso remoto para autenticar las solicitudes de conexión. Con esto, el propio servidor será el encargado de validar las credenciales de los usuarios que intenten conectarse mediante VPN, sin necesidad de integrar un servidor RADIUS externo.</p>
<p><img alt="VPN" src="../img/vpn8.png" /></p>
<hr />
<p>Tras completar todas las fases del asistente, se muestra un resumen indicando la interfaz por la que los clientes VPN se conectarán, así como la red que se asignará para el direccionamiento interno. Con esta información confirmada, solo queda finalizar el asistente para que el servicio de Enrutamiento y acceso remoto quede habilitado y el servidor empiece a funcionar como servidor VPN.</p>
<p><img alt="VPN" src="../img/vpn9.png" /></p>
<hr />
<h2 id="configurar-el-rango-de-direcciones-para-los-clientes-del-tunel-vpn"><strong>Configurar el rango de direcciones para los clientes del túnel VPN</strong></h2>
<p>Para definir qué direcciones IP recibirán los clientes que se conecten al túnel VPN, se accede a las propiedades del servidor dentro de Enrutamiento y acceso remoto. En la pestaña IPv4, se selecciona la opción Conjunto de direcciones estáticas y se utiliza el botón Agregar para establecer el rango que se asignará de forma exclusiva a los usuarios conectados mediante VPN.</p>
<p><img alt="VPN" src="../img/vpn10.png" /></p>
<hr />
<p>Para permitir que el usuario pueda autenticarse mediante VPN, se accede a sus propiedades y dentro de la pestaña Marcado se habilita la opción Permitir acceso. Con este ajuste, el servidor autoriza explícitamente a esta cuenta para establecer conexiones remotas a través del servicio de Enrutamiento y acceso remoto, asegurando que solo usuarios aprobados puedan acceder al túnel VPN.</p>
<p><img alt="VPN" src="../img/vpn11.png" /></p>
<hr />
<h2 id="configuracion-de-la-conexion-vpn-en-el-cliente"><strong>Configuración de la conexión VPN en el cliente</strong></h2>
<p>En el equipo cliente se procede a crear la conexión VPN introduciendo la información necesaria: un nombre identificativo para la conexión, la dirección IP del servidor VPN y el protocolo a utilizar. También se especifican las credenciales del usuario autorizado para establecer el túnel. Estos parámetros permiten que el cliente pueda autenticar correctamente la conexión y comunicarse con el servidor de forma segura.</p>
<p><img alt="VPN" src="../img/vpn12.png" /></p>
<hr />
<p>Una vez creada la conexión VPN en el cliente, esta aparece disponible en el panel de configuración, permitiendo gestionarla directamente desde el sistema. En este punto se puede revisar su estado, acceder a las opciones avanzadas y preparar la conexión para su uso.
Tras iniciar la conexión, el cliente establece correctamente el túnel con el servidor VPN y el estado cambia a Conectado. Desde esta misma ventana es posible mantener la sesión activa o desconectarla cuando sea necesario, verificando así que la comunicación con el servidor se realiza de forma correcta.</p>
<p><img alt="VPN" src="../img/vpn13.png" />
<img alt="VPN" src="../img/vpn14.png" /></p>
<hr />
<h2 id="configuracion-de-la-carpeta-accesible-unicamente-por-el-usuario-vpn"><strong>Configuración de la carpeta accesible únicamente por el usuario VPN</strong></h2>
<p>Para proteger el recurso compartido y asegurar que únicamente el usuario conectado por VPN pueda acceder, se crea una carpeta dedicada y se configura como recurso compartido. Desde las propiedades de la carpeta se habilita el uso compartido y se asigna un nombre identificativo accesible a través de la red. Este paso permite que la carpeta pueda ser alcanzada mediante el túnel VPN una vez que el usuario esté autenticado.</p>
<p><img alt="VPN" src="../img/vpn15.png" /></p>
<hr />
<p>Para definir correctamente quién puede acceder al recurso compartido, se selecciona únicamente al usuario destinado para la VPN y se le asignan los permisos necesarios. En este caso, se agrega el usuario vpnuser y se establece su nivel de permiso en Lectura y escritura, garantizando que solo él pueda interactuar con la carpeta cuando acceda a través del túnel VPN. Los demás usuarios mantienen permisos restringidos o no tienen acceso, reforzando el control de seguridad del recurso.</p>
<p><img alt="VPN" src="../img/vpn16.png" /></p>
<hr />
<p>Para comprobar el acceso a la carpeta compartida desde el cliente conectado por VPN, se utiliza el comando Ejecutar introduciendo la ruta UNC del recurso. Al indicar \WIN-S7UCV5BGJGB\VPNShare, el sistema intenta acceder directamente a la carpeta a través del túnel VPN, verificando así que la conexión está activa y que el usuario dispone de los permisos adecuados para interactuar con el recurso.</p>
<p><img alt="VPN" src="../img/vpn17.png" /></p>
<hr />
<p>Para finalizar la comprobación, se accede nuevamente al recurso compartido VPNShare desde el cliente conectado por VPN y se confirma que el archivo test.txt es visible y accesible. La ventana del símbolo del sistema muestra el hostname del equipo cliente, lo que verifica que el acceso se realiza realmente desde la máquina remota a través del túnel VPN. Con esto se confirma que la configuración es correcta y que únicamente el usuario autenticado por VPN puede acceder a la carpeta protegida.</p>
<p><img alt="VPN" src="../img/vpn18.png" /></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../kernel/kernel_linux/" class="btn btn-neutral float-left" title="Gestión de Kernels"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p><p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><a property="dct:title" rel="cc:attributionURL" href="https://daarieel.github.io/ASO">MkDocs ASO</a> by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://github.com/darielpp">Dariel Piñón</a> is licensed under <a href="https://creativecommons.org/licenses/by-nc/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-flex;"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1" alt=""></a></p></p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../kernel/kernel_linux/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
